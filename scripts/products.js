let products = [
    {
        id: 1,
        imgUrl: "./filterImages/dress1.png",
        name: "Fresia Garden skies kiss",
        price: "$1,250 USD",
        description: "The Fresia Garden skies is perfect for any occasion, with an embroidered bottom skirt and beautiful motifs of golden stars and moons",
        length: "ankle length",
        type: ["Embroidery"],
        collection: "FallWinter21'"

    },

    {
      id: 2,
        imgUrl: "./filterImages/dress2.png",
        name: "Cloud Starlet Cape Gown",
        price: "$1,200 USD",
        description: "Combining elegance and a mysterious aura, paired up with stuning gold embelishments this cape-gown is perfect for having that elegant escense in your look",
        length: "floor length",
        type: ["Cape-gown"],
        collection: "FallWinter21'"
    },

    {
      id: 3,
      imgUrl: "./filterImages/dress3.png",
      name: "Melrose Iridescent Gown",
      price: "$1,190 USD",
      description: " A beautiful gown with a slit open in  the side, this a gorgeous iridescent merlose will make you company you in your best moments",
      length: "Floor length",
      type: ["Slit open", "Buttons"],
      collection: "SpringSumer 22'"
  },

  {
    id: 4,
    imgUrl: "./filterImages/dress4.png",
    name: "Gold Flower Dream",
    price: "$1,230 USD",
    description: "Simplicity and elegance meet in the Gold flower dream, with nice details of gold and dreamlike puff sleeves",
    length: "above ankle",
    type: ["Puff sleeves"],
    collection: "FallWinter 20'"
},


{
  id: 5,
  imgUrl: "./filterImages/dress5.png",
  name: "Rose Gold Flourish",
  price: "$1,500 USD",
  description: "Fairy-like looking gown, with tulle embellishments at the top and a nice wide skirt decorated with embroidered flowers",
  length: "floor length",
  type: [ "Tulle", "Embroidery"],
  collection: "SpringSummer19'"
},

{
  id: 6,
  imgUrl: "./filterImages/dress6.png",
  name: "Blossom Pastel Painting",
  price: "$1,330 USD",
  description: "Like our of a painting, the pastel flowers decorate this floor length gown beautifully",
  length: "floor length",
  type: [ "Puff sleeves", "Floral print"],
  collection: "SpringSummer 21'"
},
{
  id: 7,
  imgUrl: "./filterImages/dress7.png",
  name: "Sparkling Winter Cape Gown",
  price: "$1,200 USD",
  description: "The Sparkling winter Cape gown, breathtaking since the start with a dramatic cape and gold embellishments in the fabric",
  length: "floor length",
  type: [ "Cape-gown"],
  collection: "SpringSummer 21'"
},

{
  id: 8,
  imgUrl: "./filterImages/dress8.png",
  name: "Starry Lilac Sky",
  price: "$1,140 USD",
  description: "Tulle lilac dress, with sparkling decoratives that almost resemble stars",
  length: "above ankle",
  type: [ "Tulle"],
  collection: "FallWinter 20'"
},

{
  id: 9,
  imgUrl: "./filterImages/dress9.png",
  name: "Timeless Rose Gown",
  price: "$1,500 USD",
  description: "Timeless, sophisticated and flattering, this rose gown is perfect for anybody",
  length: "floor length",
  type: [ "Buttons", "Slit open"],
  collection: "SpringSummer 21'"
},

{
  id: 10,
  imgUrl: "./filterImages/dress10.png",
  name: "Cherry Parfait Mini Dress",
  price: "$1,220 USD",
  description: "Colorful mini dress, with a beautiful sircle skirt and embroidery of cherries that compliment the vivid green",
  length: "above the knee",
  type: [ "Puff sleeves", "Embroidery"],
  collection: "FallWinter 20'"
},
{
  id: 11,
  imgUrl: "./filterImages/dress11.png",
  name: "Wild Daffoids Dress",
  price: "$1,440 USD",
  description: "A dreamy dress full of embroidered flowers and layers of tulle",
  length: "ankle length",
  type: ["Embroidery", "Tulle"],
  collection: "FallWinter21'"

},

{
id: 12,
  imgUrl: "./filterImages/dress12.png",
  name: "Summer Day",
  price: "$1,200 USD",
  description: "A refreshing piece that fells like a warm summer day",
  length: "ankle length",
  type: ["Tulle", "puff sleeves"],
  collection: "FallWinter21'"
},

{
id: 13,
imgUrl: "./filterImages/dress13.png",
name: "Fairy Rose Enchanted",
price: "$1,330 USD",
description: "With delicate details all around, this is a perfect piece for both formal and more casual settings",
length: "ankle length",
type: ["Tulle", "Embroidery"],
collection: "SpringSumer 22'"
},

{
id: 14,
imgUrl: "./filterImages/dress14.png",
name: "Flourishing Meadow dress",
price: "$1,230 USD",
description: "A nice, flattering shape with a beautiful sage green, perfect for any occasion",
length: "ankle length",
type: ["Embroidery"],
collection: "FallWinter 20'"
},


{
id: 15,
imgUrl: "./filterImages/dress15.png",
name: "White Snow",
price: "$1,110 USD",
description: "A simple yet classic option for a  white, breathy dress that chanels spring",
length: "above ankle",
type: [ "Tulle"],
collection: "SpringSummer19'"
},

{
id: 16,
imgUrl: "./filterImages/dress16.png",
name: "Lavander Drapped Dress",
price: "$1,330 USD",
description: "Perfect for spring, this dress has a beautiful tulle layer on top of a circle skirt with a striking pattern of flowers",
length: "ankle length",
type: [ "Buttons", "Floral print"],
collection: "SpringSummer 21'"
},
{
id: 17,
imgUrl: "./filterImages/dress17.png",
name: "Mint Starry Sky",
price: "$1,200 USD",
description: "Tulle minty dress, with sparkling decoratives that almost resemble stars",
length: "above ankle",
type: [ "Tulle"],
collection: "SpringSummer 21'"
},

{
id: 18,
imgUrl: "./filterImages/dress18.png",
name: "Pink Starry Sky",
price: "$1,240 USD",
description: "Tulle pink dress, with sparkling decoratives that almost resemble stars",
length: "above ankle",
type: [ "Tulle"],
collection: "FallWinter 20'"
},

{
id: 19,

imgUrl: "./filterImages/dress19.png",
name: "Garden of Flowers",
price: "$1,200 USD",
description: "Filled with embroidered flowers, this dress brings the memory of a sunrise in unknown gardens",
length: "floor length",
type: [ "Puff sleeves", "Embroidery"],
collection: "SpringSummer 21'"
},

{
id: 20,
imgUrl: "./filterImages/dress20.png",
name: "Sweet Blossoming",
price: "$1,550 USD",
description: "A gorgeous embroidered fabril with different pastel colored types of flowers, that feel like recorring a palace's garden",
length: "above the knee",
type: [ "Puff sleeves", "Embroidery"],
collection: "FallWinter 20'"
},


  ]

  

let container = document.getElementById('products-container');
displayProducts(products);

function displayProducts(productsArr){
  container.innerHTML= "";
  productsArr.forEach(product => {
    container.innerHTML += `<a href= './item.html?id=${product.id}'>
    <div class="card mx-2 px-4 py-4">
    <div class=" ">
      <figure class="image is-6by3">
        <img class= "card-image" src= ${product.imgUrl} alt="Placeholder image">
        
    </div>
        <div class="media-content">
          <p class="title is-5 py-3 my-1">${product.name}</p>
          <p class="subtitle is-5 my-1">${product.price}</p>
          <p class="subtitle is-6">${product.collection}</p>
        </div>
    
    </div>
    </a> `
    
    });
}

let filteredProducts = [];
let keyword = "";
let type = "all";

displayTypes ();
//displayProducts (products);

const keywordElem = document.getElementById('keyword');
keywordElem.addEventListener("change", (event) => handleKeyword(keywordElem));


//MÃ©todos
function displayTypes(){
  const typesArr = []
  products.forEach((product)=> {
    product.type.forEach(type => {
      if(!typesArr.includes(type)){
        typesArr.push(type)
      }
    })
  });
  



  console.log(typesArr)

  //Colocar nombres en el dropdown
  const dropdown = document.getElementById('type')
dropdown.addEventListener("change",(event)=> handleTypes(dropdown))

  typesArr.forEach((type)=> {
  const optionElem = document.createElement('option')
  optionElem.value = type
  optionElem.textContent = type

  dropdown.append(optionElem)
  console.log(type);


})
}


function handleKeyword(input) {
  keyword = input.value;
  filterByAllFilters();
  displayProducts(filteredProducts);
}

function handleTypes(input) {
  type = input.value;
  filterByAllFilters();
  displayProducts(filteredProducts);
}

function filterByAllFilters() {
  filteredProducts = products.filter((product) => {
    console.log(keyword, type);
    const hasKeyword =
      product.name.toLowerCase().includes(keyword.toLowerCase()) ||
      product.description.toLowerCase().includes(keyword.toLowerCase()) ||
      product.collection.toLowerCase().includes(keyword.toLowerCase())
      ;
    console.log(hasKeyword);

    let isType;
    product.type.forEach(typeElem => {
    isType = typeElem === type || type === "all";
  });
    console.log(isType);
    return hasKeyword && isType;
  });

  console.log(filteredProducts);
}

